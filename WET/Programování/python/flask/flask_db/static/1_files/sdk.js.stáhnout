(()=>{"use strict";(class extends Error{});class a extends Error{constructor(e){super(e),this.name="InvalidSDKConfig"}}const s=e=>parseFloat(String(e).replace(",",".").replace(/[^0-9.]+/g,""));class e{createdAt;orderId;products;totalVat;currency;constructor(){this.createdAt=String(+new Date)}setOrderId(e){this.orderId=e?.toString()}addProduct(e){e&&(this.products||=[],this.products.push(e))}setTotalVat(e){this.totalVat=s(e)}setCurrency(e){this.currency=e}toJSON(){return{order_id:this.orderId,products:this.products,total_vat:this.totalVat,currency:this.currency,created_at:this.createdAt}}}const r=()=>document.cookie.split("; "),o=e=>{var t=new Date;return t.setDate(t.getDate()+e),t.toUTCString()},t=(e,t)=>{var r="expires="+o(30),t=encodeURIComponent(JSON.stringify(t));document.cookie=e+`=${t}; ${r}; path=/`};const n=t=>{var e=r().find(e=>e.startsWith(t+"="));return e?JSON.parse(decodeURIComponent(e.split("=")[1])):null};const i="hg_ocm_id",c=["hgtid","aku"],p=()=>new URLSearchParams(window.location.search);var d=()=>{var e;c.some(e=>p().has(e))&&(e=(()=>{const t=p();var e=c.find(e=>t.has(e));return e?{[e]:t.get(e)}:null})(),t(i,e))};const h={hgtid:"track_id"};class u{order;pairingData;setOrder(e){this.order=e}setDataFromCookies(){var e=(e=>{var t={};if(null===e)return null;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[h[r]||r]=e[r]);return t})(n(i))??{};e.consent=!!n(i),this.pairingData=e}toJSON(){return{order:this.order?.toJSON(),pairing_data:this.pairingData}}}class E{itemId;name;priceVat;quantity;constructor(e,t,r,o){this.itemId=e.toString(),this.name=t,this.priceVat=s(r),this.quantity=parseInt(String(o).replace(",",".").replace(/[^0-9.]+/g,""))}toJSON(){return{item_id:this.itemId,name:this.name,price_vat:this.priceVat,quantity:this.quantity}}}const R=e=>{var t,r,o,s,a,n;return"hu"==e.countryCode.toLowerCase()?({endpoint:r,apiKey:o,payload:s,scriptParams:{source:a,version:n,page:t}}=e,_(r,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json","X-Api-key":o??""},body:JSON.stringify({...s.toJSON(),source:a,version:n,page:t})})):({apiKey:r,payload:o,scriptParams:{source:s,version:a,page:n}}=e,_("https://harvester.ocm.heureka.group",{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({...o.toJSON(),source:s,version:a,page:n})}))},_=async(e,r)=>{for(let t=1;t<=3;t++)try{return void await fetch(e,r)}catch(e){if(3<=t)throw e;await(t=>new Promise(e=>setTimeout(e,t)))(5e3)}},l=()=>{var e=window.ROIDataObject;return window[e]};class O{queue=[];scriptParams;order;apiKey;payload;ROIHarvesterEndpoint;countryCode;constructor(e,t,r){this.queue=e,this.scriptParams=r,this.payload=new u,this.payload.setDataFromCookies(),this.countryCode=t;e="ROI_HARVESTER_ENDPOINT_"+this.countryCode.toUpperCase();if(this.ROIHarvesterEndpoint={ROI_HARVESTER_ENDPOINT_CZ:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_SK:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",HARVESTER_ENDPOINT:"https://harvester.ocm.heureka.group",GCP_ENVIRONMENT:"prod"}[e]||"",!this.ROIHarvesterEndpoint)throw new a("SDK is not implemented properly! (No Harvester endpoint found)")}static init=r=>{let o=0;const s=setInterval(()=>{var e=l(),t=e.q,e=e.c;if((o+=1,t&&"function"==typeof t.push&&t.constructor==Array&&(new O(t,e,r).process(),clearInterval(s)),25<o&&"shoprenter"!=r.source)&&(clearInterval(s),!({ROI_HARVESTER_ENDPOINT_CZ:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_SK:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",HARVESTER_ENDPOINT:"https://harvester.ocm.heureka.group",GCP_ENVIRONMENT:"prod"}["ROI_HARVESTER_ENDPOINT_"+e.toUpperCase()]||"")))throw new a("SDK is not implemented properly! (No Harvester endpoint found)")},200)};process(){this.order=new e,this.queue.filter(e=>2<=e.length).forEach(e=>{switch(e[0]){case"authenticate":this.apiKey=e[1];break;case"set_order_id":this.order.setOrderId(e[1]);break;case"add_product":this.order.addProduct(new E(e[1]??"",e[2]??"",e[3]??"",e[4]??""));break;case"set_total_vat":this.order.setTotalVat(e[1]);break;case"set_currency":this.order.setCurrency(e[1]);break;case"send":if("Order"===e[1]){this.payload.setOrder(this.order);try{this.sendPayload()}finally{l().q=[]}}}})}async sendPayload(){await R({endpoint:this.ROIHarvesterEndpoint,apiKey:this.apiKey??"",payload:this.payload,scriptParams:this.scriptParams,countryCode:this.countryCode})}}try{d();var I=(e=>{var t=document.currentScript.src.split("?")[1];const r=new URLSearchParams(t);return e.reduce((e,t)=>(e[t]=r.get(t),e),{})})(["source","version","page"]);(class O{queue=[];scriptParams;order;apiKey;payload;ROIHarvesterEndpoint;countryCode;constructor(e,t,r){if(this.queue=e,this.scriptParams=r,this.payload=new u,this.payload.setDataFromCookies(),this.countryCode=t,e="ROI_HARVESTER_ENDPOINT_"+this.countryCode.toUpperCase(),this.ROIHarvesterEndpoint={ROI_HARVESTER_ENDPOINT_CZ:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_SK:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",HARVESTER_ENDPOINT:"https://harvester.ocm.heureka.group",GCP_ENVIRONMENT:"prod"}[e]||"",!this.ROIHarvesterEndpoint)throw new a("SDK is not implemented properly! (No Harvester endpoint found)")}static init=r=>{let o=0;const s=setInterval(()=>{var e=(t=l()).q,t=t.c;if(o+=1,e&&"function"==typeof e.push&&e.constructor==Array&&(new O(e,t,r).process(),clearInterval(s)),25<o&&"shoprenter"!=r.source&&(clearInterval(s),!{ROI_HARVESTER_ENDPOINT_CZ:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_SK:"https://europe-west3-heu-one-conv-measure-prod.cloudfunctions.net/harvest",ROI_HARVESTER_ENDPOINT_HU:"https://arukereso.hu/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_RO:"https://compari.ro/ocm/harvest-prod",ROI_HARVESTER_ENDPOINT_BG:"https://pazaruvaj.com/ocm/harvest-prod",HARVESTER_ENDPOINT:"https://harvester.ocm.heureka.group",GCP_ENVIRONMENT:"prod"}["ROI_HARVESTER_ENDPOINT_"+t.toUpperCase()]))throw new a("SDK is not implemented properly! (No Harvester endpoint found)")},200)};process(){this.order=new e,this.queue.filter(e=>2<=e.length).forEach(e=>{switch(e[0]){case"authenticate":this.apiKey=e[1];break;case"set_order_id":this.order.setOrderId(e[1]);break;case"add_product":this.order.addProduct(new E(e[1]??"",e[2]??"",e[3]??"",e[4]??""));break;case"set_total_vat":this.order.setTotalVat(e[1]);break;case"set_currency":this.order.setCurrency(e[1]);break;case"send":if("Order"===e[1]){this.payload.setOrder(this.order);try{this.sendPayload()}finally{l().q=[]}}}})}async sendPayload(){await R({endpoint:this.ROIHarvesterEndpoint,apiKey:this.apiKey??"",payload:this.payload,scriptParams:this.scriptParams,countryCode:this.countryCode})}}).init(I)}catch(e){if(!(e instanceof a||!1))throw e;console.error(e.message)}})();